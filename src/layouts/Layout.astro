---
// File: src/layouts/Layout.astro
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import 'aos/dist/aos.css';

interface Props { title: string; }
const { title } = Astro.props;
---
<!doctype html>
<html lang="en">
  <head>
    {/* ... isi head tetap sama ... */}
    <title>{title}</title>
  </head>
  <body class="bg-background text-text-primary font-sans pt-16">
    <Header />
    <main>
      <slot /> <div id="certificate-modal" class="fixed inset-0 bg-black bg-opacity-80 flex justify-center items-center z-[99] hidden p-4">
        <div class="bg-primary p-4 rounded-lg relative max-w-4xl max-h-[90vh]">
          <button id="close-modal-btn" class="absolute -top-4 -right-4 text-white bg-accent rounded-full w-10 h-10 text-2xl flex justify-center items-center">&times;</button>
          <img id="modal-img" src="" alt="Sertifikat" class="object-contain w-full h-full max-h-[85vh]"/>
        </div>
      </div>
      </main>
    <Footer />
    
    <script>
      import AOS from 'aos';
      AOS.init({
        duration: 800,
        once: true,
        offset: 50,
      });

      // ▼▼▼ SCRIPT UNTUK MODAL SERTIFIKAT ▼▼▼
      const modal = document.getElementById('certificate-modal');
      const modalImg = document.getElementById('modal-img');
      const closeModalBtn = document.getElementById('close-modal-btn');
      
      // Cari semua kartu sertifikat yang bisa di-klik
      const certificateTriggers = document.querySelectorAll('.certificate-trigger');

      certificateTriggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
          const fullImgSrc = trigger.getAttribute('data-full-img');
          if (modal && modalImg && fullImgSrc) {
            modalImg.setAttribute('src', fullImgSrc);
            modal.classList.remove('hidden');
          }
        });
      });

      // Fungsi untuk menutup modal
      function closeModal() {
        if (modal) {
          modal.classList.add('hidden');
        }
      }

      closeModalBtn?.addEventListener('click', closeModal);
      modal?.addEventListener('click', (e) => {
        // Hanya tutup jika klik di background gelap (overlay), bukan di gambar
        if (e.target === modal) {
          closeModal();
        }
      });
    </script>
  </body>
</html>